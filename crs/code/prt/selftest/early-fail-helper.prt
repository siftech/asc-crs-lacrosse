# Hey EMACS, this should be in -*- perl -*- mode
# ------------------------------------------------------------
# COPYRIGHT START
# Copyright (c) 2014, Smart Information Flow Technologies (SIFT).
# COPYRIGHT END
# ------------------------------------------------------------
#
# PRT (PRS Regression Tester) sample test specification file
#
# Test specification hash reference
#  - The name of the variable is NOT important;
#  - It MUST be "returned" by this file;
#    i.e. it should be the the last reference in the file
$test = {
  # -- Name: single-word (no spaces) name of the test
  #    DEFAULT: basename of filename sans .prt file extension
  # name => "sample",

  # -- Description: arbitrary text for human consumption only
  #    DEFAULT: ""  (no description)
  description => "verifies that PRT exits when an early test (that enables other tests) fails",

  # -- Keywords: arbitrary list of key words by which can be used to
  #        filter the tests when running or showing results, etc...
  #    DEFAULT: [ ] - empty list
  keywords => [ qw / prt self-test / ],

  # -- DefaultIgnore: if true, will skip this test unless either:
  #      a) the filename or test-name is explicitly listed on the command line
  #      b) the `--all` argument is given to prt
  #    DEFAULT: undef/0/false
  #
  # This test ignored because it fails. It is used as the thing to be
  # run for a *different* test.
  defaultIgnore => 1,

  agents => [
      {
        name         => "enabler",
        description  => "everyone needs to wait for this guy, but this guy will fail",
        command   => ["ping"],
        exit_code    => 0,
        complete_before_continuing => 1,
      },
      {
        name         => "dependant",
        description  => "will wait for turn, if TERM handler isn't fixed, will not exit and PRT will hang",
        command   => [ "echo", "Hello world." ],
      },
    ]
  };

# you could put other code here, but not sure what that would serve.

# Always end with a reference to the test specification hash reference.
$test;
